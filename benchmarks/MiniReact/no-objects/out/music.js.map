{"version":3,"names":["react_invariant$default","condition","format","Error","sh_CHECKED_CAST$default","value","T","sh_microtask$INTERNAL$microtaskQueue","sh_microtask$drainMicrotaskQueue","i","length","undefined","sh_microtask$queueMicrotask","callback","push","sh_fastarray$join","arr","sep","result","e","sh_fastarray$reduce","TInput","fn","acc","TAcc","item","index","initialValue","sh_fastarray$map","TOutput","output","sh_fastarray$includes","searchElement","react_index$INTERNAL$padString","str","len","react_index$INTERNAL$React$ElementType","react_index$INTERNAL$Component","react_index$INTERNAL$React$Element","type","ElementType","props","react_index$Props","key","react_index$INTERNAL$React$Key","ref","constructor","react_index$React$MixedElement","react_index$INTERNAL$React$NodeWithoutArray","react_index$React$Node","react_index$INTERNAL$REACT_FRAGMENT_TYPE","react_index$INTERNAL$workInProgressRoot","react_index$INTERNAL$Root","react_index$INTERNAL$workInProgressFiber","react_index$INTERNAL$Fiber","react_index$INTERNAL$workInProgressState","react_index$INTERNAL$State","react_index$INTERNAL$renderPhaseUpdateQueue","react_index$INTERNAL$Update","react_index$createRoot","react_index$useState","initial","prev","root","fiber","state","_workInProgressState","nextState","next","updater","update","notify","react_index$INTERNAL$callbacks","Map","react_index$callOnClickOrChange","id","event","get","run","changed","Object","is","element","updateQueue","doWork","render","hasChanges","printFiber","mustRender","mountFiber","fiber2","renderFiber","child","sibling","parent","out","level","kind","tag","react_index$INTERNAL$FiberTypeHost","padStr","propName","propValue","entries","JSON","stringify","printChildren","text","react_index$INTERNAL$FiberTypeText","current","react_index$INTERNAL$FiberTypeComponent","component","iterationCount","reconcileFiber","onClick","set","onChange","elementOrString","react_index$INTERNAL$FiberType","children","mountChildren","react_index$INTERNAL$FiberTypeFragment","parentFiber","Array","isArray","childElement","prevChild","reconcileChildren","childrenArray","reconcileMultipleChildren","keyedChildren","prevByIndex","prevFiber","react_index$jsx","react_index$Fragment","react_index$forwardRef","comp","class_variance_authority_index$cva","base","variants","opts","baseString","utils$cn","rest","join","button$buttonVariants","variant","default","destructive","outline","secondary","ghost","link","size","sm","lg","icon","defaultVariants","button$Button","className","asChild","page$default","toggle","setToggle","String","index$INTERNAL$printIf1","print","index$INTERNAL$run","N","rootElement"],"sources":["../src/packages/react/invariant.js","../src/packages/sh/CHECKED_CAST.js","../src/packages/sh/microtask.js","../src/packages/sh/fastarray.js","../src/packages/react/index.js","../src/packages/class-variance-authority/index.js","../src/lib/utils.js","../src/registry/new-york/ui/button.js","../src/app/music/page.js","../src/app/music/index.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/react/invariant.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/sh/CHECKED_CAST.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/sh/microtask.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/sh/fastarray.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/react/index.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/packages/class-variance-authority/index.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/lib/utils.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/registry/new-york/ui/button.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/app/music/page.js","/Users/pieterv/fbsource/xplat/static_h/benchmarks/MiniReact/no-objects/src/app/music/index.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nexport default function invariant(condition: boolean, format: string): void {\n  'inline';\n\n  if (!condition) {\n    throw new Error(format);\n  }\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nexport default function CHECKED_CAST<T>(value: mixed): T {\n  'inline';\n  return (value: any);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nlet microtaskQueue = [];\n\nexport function drainMicrotaskQueue(): void {\n  for (let i = 0; i < microtaskQueue.length; i++) {\n    microtaskQueue[i]();\n    microtaskQueue[i] = undefined;\n  }\n  microtaskQueue = [];\n}\n\nexport function queueMicrotask(callback: () => void): void {\n  microtaskQueue.push(callback);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nexport function join(arr: string[], sep: string): string {\n  let result: string = '';\n  for (let i: number = 0, e = arr.length; i < e; ++i) {\n    if (i !== 0) result += sep;\n    result += arr[i];\n  }\n  return result;\n}\n\nexport function reduce<TInput, TAcc>(\n  arr: TInput[],\n  fn: (acc: TAcc, item: TInput, index: number) => TAcc,\n  initialValue: TAcc,\n): TAcc {\n  let acc = initialValue;\n  for (let i = 0, e = arr.length; i < e; ++i) {\n    acc = fn(acc, arr[i], i);\n  }\n  return acc;\n}\n\nexport function map<TInput, TOutput>(\n  arr: TInput[],\n  fn: (item: TInput, index: number) => TOutput,\n): TOutput[] {\n  const output: TOutput[] = [];\n  for (let i = 0, e = arr.length; i < e; ++i) {\n    output.push(fn(arr[i], i));\n  }\n  return output;\n}\n\nexport function includes<T>(arr: T[], searchElement: T): boolean {\n  for (let i = 0, e = arr.length; i < e; ++i) {\n    if (arr[i] === searchElement) {\n      return true;\n    }\n  }\n  return false;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport invariant from './invariant';\nimport CHECKED_CAST from 'sh/CHECKED_CAST';\nimport {queueMicrotask} from 'sh/microtask';\nimport {join} from 'sh/fastarray';\n\nfunction padString(str: string, len: number): string {\n  let result: string = '';\n  for (let i: number = 0; i < len; i++) {\n    result += str;\n  }\n  return result;\n}\n\n/**\n * The type of an element in React. A React element may be a:\n *\n * - String. These elements are intrinsics that depend on the React renderer\n *   implementation.\n * - React component. See `ComponentType` for more information about its\n *   different variants.\n */\ntype React$ElementType =\n  | string\n  | Component /* TODO: React$AbstractComponent<empty, mixed> */\n  | number /* TODO: symbol */;\n\n/**\n * Type of a React element. React elements are commonly created using JSX\n * literals, which desugar to React.createElement calls (see below).\n */\n// type React$Element<ElementType: React$ElementType> = {|\n//   type: ElementType,\n//   props: Props,\n//   key: React$Key | null,\n//   ref: any,\n// |};\nclass React$Element<ElementType> {\n  type: ElementType;\n  props: Props;\n  key: React$Key | null;\n  ref: any;\n\n  constructor(\n    type: ElementType,\n    props: Props,\n    key: React$Key | null,\n    ref: any,\n  ) {\n    this.type = type;\n    this.props = props;\n    this.key = key;\n    this.ref = ref;\n  }\n}\n\nexport type React$MixedElement = React$Element<React$ElementType>;\ntype React$NodeWithoutArray = React$MixedElement | string | null | void;\nexport type React$Node = React$NodeWithoutArray[] | React$NodeWithoutArray;\n\n/**\n * The type of the key that React uses to determine where items in a new list\n * have moved.\n */\ntype React$Key = string | number;\n\nconst REACT_FRAGMENT_TYPE: number = 1 /* Symbol.for('react.fragment') */;\n\n/* eslint-disable lint/strictly-null, lint/react-state-props-mutation, lint/flow-react-element */\n\n/**\n * The current root\n */\nlet workInProgressRoot: Root | null = null;\n\n/**\n * The currently rendering fiber. Only set when a component is being rendered.\n */\nlet workInProgressFiber: Fiber | null = null;\n\n/**\n * The previous state hook, or null if no state hook has been evaluated yet.\n */\nlet workInProgressState: State<mixed> | null = null;\n\n/**\n * Queue of updates triggered *during* render.\n */\nconst renderPhaseUpdateQueue: Update<mixed>[] = [];\n\n/**\n * Public API to create a new \"root\", this is where React attaches rendering to a host element.\n * In our case we don't actually have a real host, and currently only \"render\" to strings.\n */\nexport function createRoot(): Root {\n  return new Root();\n}\n\n/**\n * Hook to create (on initial render) or access (on update) a state, using the index of the useState\n * call within the component as the identity. Thus conditionally calling this API can cause state to\n * be lost.\n */\nexport function useState<T>(\n  /**\n   * Initial value of the state\n   */\n  initial: T,\n): [T, (value: T | ((prev: T) => T)) => void] {\n  const root: Root = CHECKED_CAST<Root>(workInProgressRoot);\n  const fiber: Fiber = CHECKED_CAST<Fiber>(workInProgressFiber);\n  invariant(\n    fiber !== null && root !== null,\n    'useState() called outside of render',\n  );\n\n  let state: State<T>;\n  const _workInProgressState: State<mixed> | null = workInProgressState;\n  if (_workInProgressState === null) {\n    // Get or initialize the first state on the fiber\n    let nextState = fiber.state;\n    if (nextState === null) {\n      nextState = new State<mixed>(initial);\n      fiber.state = nextState;\n    }\n    // NOTE: in case of a re-render we assume that the hook types match but\n    // can't statically prove this\n    state = CHECKED_CAST<State<T>>(nextState);\n  } else {\n    let nextState = CHECKED_CAST<State<mixed>>(_workInProgressState).next;\n    if (nextState === null) {\n      nextState = new State<mixed>(initial);\n      CHECKED_CAST<State<mixed>>(_workInProgressState).next = nextState;\n    }\n    // NOTE: in case of a re-render we assume that the hook types match but\n    // can't statically prove this\n    state = CHECKED_CAST<State<T>>(nextState);\n  }\n  // NOTE: this should just work because of subtying, State<T> should be subtype of State<mixed>\n  workInProgressState = CHECKED_CAST<State<mixed>>(state);\n  return [\n    // Untyped check that the existing state value has the correct type,\n    // This is safe if components follow the rules of hooks\n    CHECKED_CAST<T>(state.value),\n    (updater: T | ((prev: T) => T)): void => {\n      const update = new Update<mixed>(\n        fiber,\n        CHECKED_CAST<State<mixed>>(state),\n        CHECKED_CAST<T | ((prev: T) => T)>(updater),\n      );\n      if (workInProgressFiber !== null) {\n        // called during render\n        renderPhaseUpdateQueue.push(update);\n      } else {\n        root.notify(update);\n      }\n    },\n  ];\n}\n\nconst callbacks = new Map();\nexport function callOnClickOrChange(id: string, event: any): void {\n  const callback = callbacks.get(id);\n  if (callback == null) {\n    throw new Error('No callback registered with id: ' + id);\n  }\n  callback(event);\n}\n\n/**\n * The type of value that may be passed to the setState function (second part of useState return value).\n * - T: the new value\n * - (prev: T) => T: a function to compute the new value from the old value\n */\n// type Updater<T> = T | ((prev: T) => T);\n\n/**\n * The type of the setState function (second element of the array returned by useState).\n */\n// type SetState<T> = (value: Updater<T>) => void;\n\n/**\n * A queued state update.\n */\nclass Update<T> {\n  fiber: Fiber; // used to check state updates that occur during render to see if they came from the current component.\n  state: State<T>;\n  updater: T | ((prev: T) => T); // Updater<T>;\n\n  constructor(fiber: Fiber, state: State<T>, updater: T | ((prev: T) => T)) {\n    this.fiber = fiber;\n    this.state = state;\n    this.updater = updater;\n  }\n\n  /**\n   * Process the state update\n   */\n  run(): boolean {\n    const state = this.state;\n    let value: T = state.value;\n    const updater = this.updater;\n    if (typeof updater === 'function') {\n      // NOTE: The type of Updater<T> is meant to expresss `T (not function) | T (function of T => T)`\n      // thus the fact that updater is a function here menas its a function of T => T.\n      const fn = CHECKED_CAST<(prev: T) => T>(updater);\n      value = fn(state.value);\n    } else {\n      // NOTE: The type of Updater<T> is meant to expresss `T (not function) | T (function of T => T)`\n      // thus the fact that updater is *not* a function here means it is a T\n      value = CHECKED_CAST<T>(updater);\n    }\n    const changed = !Object.is(state.value, value);\n    state.value = value;\n    return changed;\n  }\n}\n\nclass Root {\n  /**\n   * The fiber representing the root node (`element`), null until\n   * render is first called.\n   */\n  root: Fiber | null;\n\n  /**\n   * The last rendered root element, initially null.\n   */\n  element: React$MixedElement | null;\n\n  /**\n   * Queue of updates (state changes) to apply on the next render\n   */\n  updateQueue: Update<mixed>[];\n\n  constructor() {\n    this.root = null;\n    this.element = null;\n    this.updateQueue = ([]: Update<mixed>[]);\n  }\n\n  /**\n   * Notify the root that an update is scheduled\n   */\n  notify(update: Update<mixed>): void {\n    this.updateQueue.push(update);\n    if (this.updateQueue.length === 1) {\n      queueMicrotask((): void => {\n        const element = this.element;\n        invariant(\n          element !== null,\n          'Expected an element to be set after rendering',\n        );\n        this.doWork(CHECKED_CAST<React$MixedElement>(element));\n      });\n    }\n  }\n\n  /**\n   * Drive any remaining work to completion and return the rendered result\n   */\n  render(element: React$MixedElement): string {\n    invariant(\n      workInProgressFiber === null && workInProgressState === null,\n      'Cannot render, an existing render is in progress',\n    );\n    const hasChanges = element !== this.element;\n    this.element = element;\n    if (hasChanges) {\n      this.doWork(element);\n    }\n\n    invariant(this.root !== null, 'Expected root to be rendered');\n    const root: Fiber = CHECKED_CAST<Fiber>(this.root);\n    const output: string[] = [];\n    this.printFiber(root, output, 0);\n    return join(output, '\\n');\n  }\n\n  doWork(element: React$MixedElement): void {\n    let mustRender = this.root === null;\n    for (const update of this.updateQueue) {\n      mustRender = update.run() || mustRender;\n    }\n    this.updateQueue = ([]: Update<mixed>[]);\n    if (!mustRender) {\n      return;\n    }\n\n    // Visit the tree in pre-order, rendering each node\n    // and then processing its children\n    // eslint-disable-next-line consistent-this\n    workInProgressRoot = this;\n    let fiber = this.root;\n    if (fiber === null) {\n      fiber = this.mountFiber(element, null);\n      this.root = fiber;\n    }\n    while (fiber !== null) {\n      // Render the fiber, which creates child/sibling nodes\n      let fiber2: Fiber = CHECKED_CAST<Fiber>(fiber);\n      this.renderFiber(fiber2);\n      // advance to the next fiber\n      if (fiber2.child !== null) {\n        fiber = fiber2.child;\n      } else if (fiber2.sibling !== null) {\n        fiber = fiber2.sibling;\n      } else {\n        fiber = fiber2.parent;\n        while (fiber !== null && CHECKED_CAST<Fiber>(fiber).sibling === null) {\n          fiber = CHECKED_CAST<Fiber>(fiber).parent;\n        }\n        if (fiber !== null) {\n          fiber = CHECKED_CAST<Fiber>(fiber).sibling;\n        }\n      }\n    }\n    workInProgressRoot = null;\n  }\n\n  /**\n   * Prints a representation of the output DOM as HTML, emitting HTML snippets to @param out.\n   */\n  printFiber(fiber: Fiber, out: string[], level: number): void {\n    switch (fiber.type.kind) {\n      case 'host': {\n        const tag = CHECKED_CAST<FiberTypeHost>(fiber.type).tag;\n        const padStr = padString(' ', level);\n        let str = padStr + '<' + tag;\n        for (const [propName, propValue] of Object.entries(fiber.props)) {\n          if (propValue == null || typeof propValue === 'function') {\n            continue;\n          }\n\n          str += ` ${propName}=${JSON.stringify(propValue) ?? 'undefined'}`;\n        }\n        if (fiber.child == null) {\n          str += ' />';\n          out.push(str);\n        } else {\n          str += '>';\n          out.push(str);\n          this.printChildren(fiber, out, level + 1);\n          out.push(padStr + '</' + tag + '>');\n        }\n        break;\n      }\n      case 'text': {\n        const text = CHECKED_CAST<FiberTypeText>(fiber.type).text;\n        if (text !== '') {\n          out.push(padString(' ', level) + text);\n        }\n        break;\n      }\n      case 'fragment':\n      case 'component': {\n        this.printChildren(fiber, out, level);\n        break;\n      }\n    }\n  }\n\n  printChildren(fiber: Fiber, out: string[], level: number): void {\n    let current: Fiber | null = fiber.child;\n    while (current !== null) {\n      this.printFiber(CHECKED_CAST<Fiber>(current), out, level);\n      current = CHECKED_CAST<Fiber>(current).sibling;\n    }\n  }\n\n  /**\n   * Renders and reconciles the output of the given @param fiber. Note that this does not *render*\n   * children, it only reconciles the current output of the fiber with the previous children.\n   */\n  renderFiber(fiber: Fiber): void {\n    try {\n      workInProgressFiber = fiber;\n      workInProgressState = null;\n      switch (fiber.type.kind) {\n        case 'component': {\n          invariant(\n            renderPhaseUpdateQueue.length === 0,\n            'Expected no queued render updates',\n          );\n          const render: (props: Props) => React$MixedElement =\n            CHECKED_CAST<FiberTypeComponent>(fiber.type).component;\n          let element = render(fiber.props);\n          let iterationCount: number = 0;\n          while (renderPhaseUpdateQueue.length !== 0) {\n            iterationCount++;\n            invariant(\n              iterationCount < 1000,\n              'Possible infinite loop with setState during render',\n            );\n            let hasChanges = false;\n            for (const update of renderPhaseUpdateQueue) {\n              invariant(\n                update.fiber === fiber,\n                'setState() during render is currently only supported when updating the component ' +\n                  'being rendered. Setting state from another component is not supported.',\n              );\n              hasChanges = update.run() || hasChanges;\n            }\n            renderPhaseUpdateQueue.length = 0;\n            if (!hasChanges) {\n              break;\n            }\n            element = render(fiber.props);\n          }\n          fiber.child = this.reconcileFiber(fiber, fiber.child, element);\n          break;\n        }\n        case 'host': {\n          const id = fiber.props.id;\n          if (id != null) {\n            const onClick = fiber.props.onClick;\n            if (onClick != null) {\n              callbacks.set(id, onClick);\n            }\n            const onChange = fiber.props.onChange;\n            if (onChange != null) {\n              callbacks.set(id, onChange);\n            }\n          }\n          break;\n        }\n        case 'fragment':\n        case 'text': {\n          // Nothing to reconcile, these nodes are visited by the main doWork() loop\n          break;\n        }\n        default: {\n          throw new Error('Unexpected fiber kind: ' + fiber.type.kind);\n        }\n      }\n    } finally {\n      workInProgressFiber = null;\n      workInProgressState = null;\n    }\n  }\n\n  /**\n   * Create a new fiber for the given element. Used when there is no fiber at\n   * a given tree position which can be reused.\n   */\n  mountFiber(elementOrString: React$Node, parent: Fiber | null): Fiber {\n    let fiber: Fiber;\n    // TODO: Support Array of Node's being returned from a component.\n    if (typeof elementOrString === 'object') {\n      const element = CHECKED_CAST<React$MixedElement>(elementOrString);\n      if (typeof element.type === 'function') {\n        const component: Component = CHECKED_CAST<Component>(element.type);\n        const type: FiberType = new FiberTypeComponent(component);\n        fiber = new Fiber(type, (element.props: any), element.key);\n      } else if (typeof element.type === 'string') {\n        invariant(\n          typeof element.type === 'string',\n          'Expected a host component name such as \"div\" or \"span\", got ' +\n            typeof element.type,\n        );\n        const type: FiberType = new FiberTypeHost(\n          CHECKED_CAST<string>(element.type),\n        );\n        invariant(\n          element.props !== null && typeof element.props === 'object',\n          'Expected component props',\n        );\n\n        // const {children, ...props} = element.props;\n        const children = element.props.children;\n        const props = {...element.props};\n        delete props.children;\n\n        fiber = new Fiber(type, props, element.key);\n        this.mountChildren(children, fiber);\n      } else {\n        switch (element.type) {\n          case REACT_FRAGMENT_TYPE: {\n            const type: FiberType = new FiberTypeFragment();\n            fiber = new Fiber(type, (element.props: any), element.key);\n            this.mountChildren(element.props.children, fiber);\n            break;\n          }\n          default: {\n            throw new Error(`Unknown element type ${element.type}`);\n          }\n        }\n      }\n    } else if (typeof elementOrString === 'string') {\n      const type = new FiberTypeText(CHECKED_CAST<string>(elementOrString));\n      fiber = new Fiber(type, {}, null);\n    } else {\n      throw new Error(`Unexpected element type of ${typeof elementOrString}`);\n    }\n    fiber.parent = parent;\n    return fiber;\n  }\n\n  mountChildren(children: React$Node, parentFiber: Fiber): void {\n    if (Array.isArray(children)) {\n      let prev: Fiber | null = null;\n      for (const childElement of CHECKED_CAST<any[]>(children)) {\n        if (childElement == null) {\n          continue;\n        }\n        const child = this.mountFiber(\n          CHECKED_CAST<React$Node>(childElement),\n          parentFiber,\n        );\n        if (prev !== null) {\n          CHECKED_CAST<Fiber>(prev).sibling = child;\n        } else {\n          // set parent to point to first child\n          parentFiber.child = child;\n        }\n        prev = child;\n      }\n    } else if (children != null) {\n      const child = this.mountFiber((children: any), parentFiber);\n      parentFiber.child = child;\n    }\n  }\n\n  /**\n   * Update's @param parent's child to reflect the latest desired output as described by @param element.\n   * This either reuses @param prevChild if present and the component type matches, otherwise it creates\n   * a new Fiber.\n   */\n  reconcileFiber(\n    parent: Fiber,\n    prevChild: Fiber | null,\n    element: React$MixedElement,\n  ): Fiber {\n    if (\n      prevChild !== null &&\n      CHECKED_CAST<Fiber>(prevChild).type === element.type\n    ) {\n      let prevChild: Fiber = CHECKED_CAST<Fiber>(prevChild);\n      // Only host and fragment nodes have to be reconciled: otherwise this is a\n      // function component and its children will be reconciled when they are later\n      // emitted in a host position (ie as a direct result of render)\n      switch (prevChild.type.kind) {\n        case 'host': {\n          invariant(\n            element.props !== null && typeof element.props === 'object',\n            'Expected component props',\n          );\n\n          // const {children, ...props} = element.props;\n          const children = element.props.children;\n          const props = {...element.props};\n          delete props.children;\n\n          prevChild.props = props;\n          this.reconcileChildren(prevChild, (children: any));\n          break;\n        }\n        case 'fragment': {\n          invariant(\n            element.props !== null && typeof element.props === 'object',\n            'Expected component props',\n          );\n\n          const children = element.props.children;\n          this.reconcileChildren(prevChild, (children: any));\n          break;\n        }\n        case 'component': {\n          invariant(\n            element.props !== null && typeof element.props === 'object',\n            'Expected component props',\n          );\n          prevChild.props = element.props;\n          break;\n        }\n        default: {\n          throw new Error(`Unknown node kind ${prevChild.type.kind}`);\n        }\n      }\n      return prevChild;\n    } else {\n      const child = this.mountFiber(element, parent);\n      return child;\n    }\n  }\n\n  /**\n   * Reconciles the @param parent fiber's children nodes.\n   */\n  reconcileChildren(parent: Fiber, children: React$Node): void {\n    const prevChild: Fiber | null = parent.child;\n    if (Array.isArray(children)) {\n      let childrenArray = CHECKED_CAST<React$MixedElement[]>(children);\n      // Fast-path for empty and single-element arrays\n      if (childrenArray.length === 0) {\n        parent.child = null;\n      } else if (childrenArray.length === 1) {\n        parent.child = this.reconcileFiber(parent, prevChild, childrenArray[0]);\n        CHECKED_CAST<Fiber>(parent.child).sibling = null;\n      } else {\n        this.reconcileMultipleChildren(parent, childrenArray);\n      }\n    } else if (typeof children === 'string') {\n      if (\n        prevChild === null ||\n        CHECKED_CAST<Fiber>(prevChild).type.kind !== 'text'\n      ) {\n        const child = new Fiber({kind: 'text', text: children}, {}, null);\n        parent.child = child;\n      } else {\n        CHECKED_CAST<FiberTypeText>(CHECKED_CAST<Fiber>(prevChild).type).text =\n          CHECKED_CAST<string>(children);\n      }\n    } else if (children != null) {\n      parent.child = this.reconcileFiber(\n        parent,\n        prevChild,\n        CHECKED_CAST<React$MixedElement>(children),\n      );\n      CHECKED_CAST<Fiber>(parent.child).sibling = null;\n    } else {\n      parent.child = null;\n      if (prevChild !== null) {\n        CHECKED_CAST<Fiber>(prevChild).parent = null;\n      }\n    }\n  }\n\n  /**\n   * Reconciles the @param parent fiber's children when the children are known to\n   * have 2+ items. Note that the algorithm works for 0+ elements but a fast-path\n   * should be used for 0/1 item cases.\n   */\n  reconcileMultipleChildren(\n    parent: Fiber,\n    children: React$MixedElement[],\n  ): void {\n    invariant(\n      children.length > 1,\n      'Expected children to have multiple elements',\n    );\n    // map existing children by key to make subsequent lookup O(log n)\n    const keyedChildren: any = new Map();\n    let current: Fiber | null = parent.child;\n    while (current !== null) {\n      if (CHECKED_CAST<Fiber>(current).key !== null) {\n        keyedChildren.set(CHECKED_CAST<Fiber>(current).key, current);\n      }\n      current = CHECKED_CAST<Fiber>(current).sibling;\n    }\n    let prev: Fiber | null = null; // previous fiber at this key/index\n    let prevByIndex: Fiber | null = parent.child; // keep track of prev fiber at this index\n    for (const childElement of children) {\n      const prevFiber =\n        (childElement.key != null\n          ? keyedChildren.get(childElement.key)\n          : null) ?? prevByIndex;\n      let child: Fiber;\n      if (prevFiber != null) {\n        child = this.reconcileFiber(parent, prevFiber, childElement);\n      } else {\n        child = this.mountFiber(childElement, parent);\n      }\n      if (prev !== null) {\n        CHECKED_CAST<Fiber>(prev).sibling = child;\n      } else {\n        // set parent to point to first child\n        parent.child = child;\n      }\n      prev = child;\n      prevByIndex =\n        prevByIndex !== null ? CHECKED_CAST<Fiber>(prevByIndex).sibling : null;\n    }\n  }\n}\n\n/**\n * Describes the `type` field of Fiber, which can hold different data depending on the fiber's kind:\n * - Component stores a function of props => element.\n * - Host stores the name of the host component, ie \"div\"\n * - Text stores the text itself.\n */\ntype Component = (props: Props) => React$MixedElement;\n\n// type FiberType =\n//   | {\n//       kind: 'component',\n//       component: Component,\n//     }\n//   | {\n//       kind: 'host',\n//       tag: string,\n//     }\n//   | {\n//       kind: 'text',\n//       text: string,\n//     };\n\nclass FiberType {\n  kind: string;\n  constructor(kind: string) {\n    this.kind = kind;\n  }\n}\n\nclass FiberTypeComponent extends FiberType {\n  component: Component;\n  constructor(component: Component) {\n    super('component');\n    this.component = component;\n  }\n}\nclass FiberTypeHost extends FiberType {\n  tag: string;\n  constructor(tag: string) {\n    super('host');\n    this.tag = tag;\n  }\n}\nclass FiberTypeFragment extends FiberType {\n  constructor() {\n    super('fragment');\n  }\n}\nclass FiberTypeText extends FiberType {\n  text: string;\n  constructor(text: string) {\n    super('text');\n    this.text = text;\n  }\n}\n\n/**\n * The type of component props as seen by the framework, because processing is heterogenous\n * the framework only looks at the identity of prop values and does not otherwise make any\n * assumptions about which props may exist and what their types are.\n */\nexport type Props = any;\n\n/**\n * Data storage for the useState() hook\n */\nclass State<T> {\n  value: T;\n  next: State<T> | null;\n  prev: State<T> | null;\n\n  constructor(value: T) {\n    this.value = value;\n\n    this.next = null;\n    this.prev = null;\n  }\n}\n\n/**\n * Represents a node in the UI tree, and may correspond to a user-defined function component,\n * a host node, or a text node.\n */\nclass Fiber {\n  type: FiberType;\n  props: Props;\n  parent: Fiber | null;\n  child: Fiber | null;\n  sibling: Fiber | null;\n  state: State<mixed> | null;\n  key: React$Key | null;\n\n  constructor(type: FiberType, props: Props, key: React$Key | null) {\n    this.type = type;\n    this.props = props;\n    this.key = key;\n\n    this.parent = null;\n    this.child = null;\n    this.sibling = null;\n    this.state = null;\n  }\n}\n\nexport function jsx(\n  type: React$ElementType,\n  props: Props,\n  key: React$Key | null,\n): React$MixedElement {\n  'inline';\n  return {\n    type: type,\n    props: props,\n    key: key,\n    ref: null,\n  };\n}\n\nexport function Fragment(props: Props): React$MixedElement {\n  'inline';\n  return {\n    type: REACT_FRAGMENT_TYPE,\n    props: props,\n    key: null,\n    ref: null,\n  };\n}\n\nexport function forwardRef(\n  comp: (props: Props, ref: mixed) => React$MixedElement,\n): Component {\n  return (props: Props): React$MixedElement => comp(props, null);\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport CHECKED_CAST from 'sh/CHECKED_CAST';\nimport {join} from 'sh/fastarray';\n\nexport function cva(\n  base: string[] | string,\n  variants: mixed,\n): (opts: mixed) => string {\n  const baseString: string =\n    typeof base === 'string'\n      ? CHECKED_CAST<string>(base)\n      : join(CHECKED_CAST<string[]>(base), ' ');\n  return (opts: mixed): string => baseString;\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nexport function cn(...rest: any): string {\n  return rest.join(' ');\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {React$MixedElement} from 'react';\n\nimport * as React from 'react';\nimport {cva} from 'class-variance-authority';\n\nimport {cn} from '@/lib/utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default:\n          'bg-primary text-primary-foreground shadow hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90',\n        outline:\n          'border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground',\n        secondary:\n          'bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2',\n        sm: 'h-8 rounded-md px-3 text-xs',\n        lg: 'h-10 rounded-md px-8',\n        icon: 'h-9 w-9',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n);\n\nconst Button = React.forwardRef(\n  (\n    {className, variant, size, asChild = false, ...props},\n    ref,\n  ): React$MixedElement => {\n    return (\n      <button\n        className={cn(buttonVariants({variant, size, className}))}\n        ref={ref}\n        {...props}\n      />\n    );\n  },\n);\n\nexport {Button, buttonVariants};\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport type {Props, React$MixedElement} from 'react';\n\nimport {Button} from '@/registry/new-york/ui/button';\nimport {useState} from 'react';\n\nexport default function MusicPage(props: Props): React$MixedElement {\n  const [toggle, setToggle] = useState<boolean>(true);\n  return (\n    <>\n      <Button id=\"click-me\" onClick={() => setToggle(!toggle)}>\n        Click me: {String(toggle)}\n      </Button>\n      <span>Other</span>\n    </>\n  );\n}\n","/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow strict-local\n * @format\n */\n\nimport * as React from 'react';\nimport MusicPage from './page';\nimport {drainMicrotaskQueue} from 'sh/microtask';\n\nfunction printIf1(i: number, str: string): void {\n  if (i === 1) {\n    print('===============================');\n    print(str);\n    print('===============================');\n  }\n}\n\nfunction run(N: number): void {\n  for (let i: number = 1; i <= N; ++i) {\n    const root = React.createRoot();\n    const rootElement = <MusicPage />;\n    printIf1(i, root.render(rootElement));\n\n    React.callOnClickOrChange('click-me', null);\n    drainMicrotaskQueue();\n    printIf1(i, root.render(rootElement));\n  }\n}\n\nrun(1);\n",null,null,null,null,null,null,null,null,null,null],"mappings":";;;;;;;;;;;;;AUUe,SAASA,uBAASA,CAACC,SAAS,EAAE,OAAO,EAAEC,MAAM,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC;EAC1E,QAAQ;;EAER,IAAI,CAACD,SAAS,EAAE;IACd,MAAM,IAAIE,KAAK,CAACD,MAAM,CAAC;EACzB;AACF;AAAC;ACNc,SAASE,uBAAY,CAAC,CAAC,CAACA,CAACC,KAAK,EAAE,KAAK,CAAC,EAAEC,CAAC,CAAC;EACvD,QAAQ;;EACR,OAAQ,CAAAD,KAAK,EAAE,GAAG;AACpB;AAAC;ACHD,IAAIE,oCAAc,GAAG,EAAE;AAEhB,SAASC,gCAAmBA,CAAA,CAAE,EAAE,IAAI,CAAC;EAC1C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,oCAAc,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;IAC9CF,oCAAc,CAACE,CAAC,CAAC,CAAC,CAAC;IACnBF,oCAAc,CAACE,CAAC,CAAC,GAAGE,SAAS;EAC/B;EACAJ,oCAAc,GAAG,EAAE;AACrB;AAEO,SAASK,2BAAcA,CAACC,QAAQ,EAAE,MAAM,IAAI,CAAC,EAAE,IAAI,CAAC;EACzDN,oCAAc,CAACO,IAAI,CAACD,QAAQ,CAAC;AAC/B;AAAC;ACZM,SAASE,iBAAIA,CAACC,GAAG,EAAE,MAAM,EAAE,EAAEC,GAAG,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC;EACvD,IAAIC,MAAM,EAAE,MAAM,GAAG,EAAE;EACvB,KAAK,IAAIT,CAAC,EAAE,MAAM,GAAG,CAAC,EAAEU,CAAC,GAAGH,GAAG,CAACN,MAAM,EAAED,CAAC,GAAGU,CAAC,EAAE,EAAEV,CAAC,EAAE;IAClD,IAAIA,CAAC,KAAK,CAAC,EAAES,MAAM,IAAID,GAAG;IAC1BC,MAAM,IAAIF,GAAG,CAACP,CAAC,CAAC;EAClB;EACA,OAAOS,MAAM;AACf;AAEO,SAASE,mBAAM,CAAC,MAAM,EAAE,IAAI,CAACA,CAClCJ,GAAG,EAAEK,MAAM,EAAE,EACbC,EAAE,EAAE,CAACC,GAAG,EAAEC,IAAI,EAAEC,IAAI,EAAEJ,MAAM,EAAEK,KAAK,EAAE,MAAM,KAAKF,IAAI,EACpDG,YAAY,EAAEH,IAAI,CACnB,EAAEA,IAAI,CAAC;EACN,IAAID,GAAG,GAAGI,YAAY;EACtB,KAAK,IAAIlB,CAAC,GAAG,CAAC,EAAEU,CAAC,GAAGH,GAAG,CAACN,MAAM,EAAED,CAAC,GAAGU,CAAC,EAAE,EAAEV,CAAC,EAAE;IAC1Cc,GAAG,GAAGD,EAAE,CAACC,GAAG,EAAEP,GAAG,CAACP,CAAC,CAAC,EAAEA,CAAC,CAAC;EAC1B;EACA,OAAOc,GAAG;AACZ;AAEO,SAASK,gBAAG,CAAC,MAAM,EAAE,OAAO,CAACA,CAClCZ,GAAG,EAAEK,MAAM,EAAE,EACbC,EAAE,EAAE,CAACG,IAAI,EAAEJ,MAAM,EAAEK,KAAK,EAAE,MAAM,KAAKG,OAAO,CAC7C,EAAEA,OAAO,EAAE,CAAC;EACX,MAAMC,MAAM,EAAED,OAAO,EAAE,GAAG,EAAE;EAC5B,KAAK,IAAIpB,CAAC,GAAG,CAAC,EAAEU,CAAC,GAAGH,GAAG,CAACN,MAAM,EAAED,CAAC,GAAGU,CAAC,EAAE,EAAEV,CAAC,EAAE;IAC1CqB,MAAM,CAAChB,IAAI,CAACQ,EAAE,CAACN,GAAG,CAACP,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC;EAC5B;EACA,OAAOqB,MAAM;AACf;AAEO,SAASC,qBAAQ,CAAC,CAAC,CAACA,CAACf,GAAG,EAAEV,CAAC,EAAE,EAAE0B,aAAa,EAAE1B,CAAC,CAAC,EAAE,OAAO,CAAC;EAC/D,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEU,CAAC,GAAGH,GAAG,CAACN,MAAM,EAAED,CAAC,GAAGU,CAAC,EAAE,EAAEV,CAAC,EAAE;IAC1C,IAAIO,GAAG,CAACP,CAAC,CAAC,KAAKuB,aAAa,EAAE;MAC5B,OAAO,IAAI;IACb;EACF;EACA,OAAO,KAAK;AACd;AAAC;AClCD,SAASC,8BAASA,CAACC,GAAG,EAAE,MAAM,EAAEC,GAAG,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC;EACnD,IAAIjB,MAAM,EAAE,MAAM,GAAG,EAAE;EACvB,KAAK,IAAIT,CAAC,EAAE,MAAM,GAAG,CAAC,EAAEA,CAAC,GAAG0B,GAAG,EAAE1B,CAAC,EAAE,EAAE;IACpCS,MAAM,IAAIgB,GAAG;EACf;EACA,OAAOhB,MAAM;AACf;;;;;;;;;AAUA,KAAKkB,sCAAiB,GAClB,MAAM,GACNC,8BAAS,C,oDACT,MAAM,C;;;;;;;;;;;AAYV,MAAMC,kCAAa,CAAC,WAAW,CAAC,CAAC;EAC/BC,IAAI,EAAEC,WAAW;EACjBC,KAAK,EAAEC,iBAAK;EACZC,GAAG,EAAEC,8BAAS,GAAG,IAAI;EACrBC,GAAG,EAAE,GAAG;EAERC,WAAWA,CACTP,IAAI,EAAEC,WAAW,EACjBC,KAAK,EAAEC,iBAAK,EACZC,GAAG,EAAEC,8BAAS,GAAG,IAAI,EACrBC,GAAG,EAAE,GAAG,EACR;IACA,IAAI,CAACN,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACE,GAAG,GAAGA,GAAG;IACd,IAAI,CAACE,GAAG,GAAGA,GAAG;EAChB;AACF;AAEO,KAAKE,8BAAkB,GAAGT,kCAAa,CAACF,sCAAiB,CAAC;AACjE,KAAKY,2CAAsB,GAAGD,8BAAkB,GAAG,MAAM,GAAG,IAAI,GAAG,IAAI;AAChE,KAAKE,sBAAU,GAAGD,2CAAsB,EAAE,GAAGA,2CAAsB;;;;;AAM1E,KAAKJ,8BAAS,GAAG,MAAM,GAAG,MAAM;AAEhC,MAAMM,wCAAmB,EAAE,MAAM,GAAG,CAAC,C;;;;;;AAOrC,IAAIC,uCAAkB,EAAEC,yBAAI,GAAG,IAAI,GAAG,IAAI;;;;AAK1C,IAAIC,wCAAmB,EAAEC,0BAAK,GAAG,IAAI,GAAG,IAAI;;;;AAK5C,IAAIC,wCAAmB,EAAEC,0BAAK,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI;;;;AAKnD,MAAMC,2CAAsB,EAAEC,2BAAM,CAAC,KAAK,CAAC,EAAE,GAAG,EAAE;;;;;AAM3C,SAASC,sBAAUA,CAAA,CAAE,EAAEP,yBAAI,CAAC;EACjC,OAAO,IAAIA,yBAAI,CAAC,CAAC;AACnB;;;;;;AAOO,SAASQ,oBAAQ,CAAC,CAAC,CAACA;;;;AAIzBC,OAAO,EAAEvD,CAAC,CACX,EAAE,CAACA,CAAC,EAAE,CAACD,KAAK,EAAEC,CAAC,IAAI,CAACwD,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC;EAC5C,MAAMyD,IAAI,EAAEX,yBAAI,GAAGhD,uBAAY,CAACgD,yBAAI,CAAC,CAACD,uCAAkB,CAAC;EACzD,MAAMa,KAAK,EAAEV,0BAAK,GAAGlD,uBAAY,CAACkD,0BAAK,CAAC,CAACD,wCAAmB,CAAC;EAC7DrD,uBAAS,CACPgE,KAAK,KAAK,IAAI,IAAID,IAAI,KAAK,IAAI,EAC/B,qCACF,CAAC;EAED,IAAIE,KAAK,EAAET,0BAAK,CAAClD,CAAC,CAAC;EACnB,MAAM4D,oBAAoB,EAAEV,0BAAK,CAAC,KAAK,CAAC,GAAG,IAAI,GAAGD,wCAAmB;EACrE,IAAIW,oBAAoB,KAAK,IAAI,EAAE;;IAEjC,IAAIC,SAAS,GAAGH,KAAK,CAACC,KAAK;IAC3B,IAAIE,SAAS,KAAK,IAAI,EAAE;MACtBA,SAAS,GAAG,IAAIX,0BAAK,CAAC,KAAK,CAAC,CAACK,OAAO,CAAC;MACrCG,KAAK,CAACC,KAAK,GAAGE,SAAS;IACzB;;;IAGAF,KAAK,GAAG7D,uBAAY,CAACoD,0BAAK,CAAClD,CAAC,CAAC,CAAC,CAAC6D,SAAS,CAAC;EAC3C,CAAC,MAAM;IACL,IAAIA,SAAS,GAAG/D,uBAAY,CAACoD,0BAAK,CAAC,KAAK,CAAC,CAAC,CAACU,oBAAoB,CAAC,CAACE,IAAI;IACrE,IAAID,SAAS,KAAK,IAAI,EAAE;MACtBA,SAAS,GAAG,IAAIX,0BAAK,CAAC,KAAK,CAAC,CAACK,OAAO,CAAC;MACrCzD,uBAAY,CAACoD,0BAAK,CAAC,KAAK,CAAC,CAAC,CAACU,oBAAoB,CAAC,CAACE,IAAI,GAAGD,SAAS;IACnE;;;IAGAF,KAAK,GAAG7D,uBAAY,CAACoD,0BAAK,CAAClD,CAAC,CAAC,CAAC,CAAC6D,SAAS,CAAC;EAC3C;;EAEAZ,wCAAmB,GAAGnD,uBAAY,CAACoD,0BAAK,CAAC,KAAK,CAAC,CAAC,CAACS,KAAK,CAAC;EACvD,OAAO;;;EAGL7D,uBAAY,CAACE,CAAC,CAAC,CAAC2D,KAAK,CAAC5D,KAAK,CAAC,EAC5B,CAACgE,OAAO,EAAE/D,CAAC,IAAI,CAACwD,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI;IACvC,MAAMgE,MAAM,GAAG,IAAIZ,2BAAM,CAAC,KAAK,CAAC,CAC9BM,KAAK,EACL5D,uBAAY,CAACoD,0BAAK,CAAC,KAAK,CAAC,CAAC,CAACS,KAAK,CAAC,EACjC7D,uBAAY,CAACE,CAAC,IAAI,CAACwD,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC,CAAC,CAAC+D,OAAO,CAC5C,CAAC;IACD,IAAIhB,wCAAmB,KAAK,IAAI,EAAE;;MAEhCI,2CAAsB,CAAC3C,IAAI,CAACwD,MAAM,CAAC;IACrC,CAAC,MAAM;MACLP,IAAI,CAACQ,MAAM,CAACD,MAAM,CAAC;IACrB;EACF,CAAC,CACF;AACH;AAEA,MAAME,8BAAS,GAAG,IAAIC,GAAG,CAAC,CAAC;AACpB,SAASC,+BAAmBA,CAACC,EAAE,EAAE,MAAM,EAAEC,KAAK,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC;EAChE,MAAM/D,QAAQ,GAAG2D,8BAAS,CAACK,GAAG,CAACF,EAAE,CAAC;EAClC,IAAI9D,QAAQ,IAAI,IAAI,EAAE;IACpB,MAAM,IAAIV,KAAK,CAAC,kCAAkC,GAAGwE,EAAE,CAAC;EAC1D;EACA9D,QAAQ,CAAC+D,KAAK,CAAC;AACjB;;;;;;;;;;;;;;;;AAiBA,MAAMlB,2BAAM,CAAC,CAAC,CAAC,CAAC;EACdM,KAAK,EAAEV,0BAAK;EACZW,KAAK,EAAET,0BAAK,CAAClD,CAAC,CAAC;EACf+D,OAAO,EAAE/D,CAAC,IAAI,CAACwD,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC;EAE7BwC,WAAWA,CAACkB,KAAK,EAAEV,0BAAK,EAAEW,KAAK,EAAET,0BAAK,CAAClD,CAAC,CAAC,EAAE+D,OAAO,EAAE/D,CAAC,IAAI,CAACwD,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC,EAAE;IACxE,IAAI,CAAC0D,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACI,OAAO,GAAGA,OAAO;EACxB;EAKAS,GAAGA,CAAA,CAAE,EAAE,OAAO,CAAC;IACb,MAAMb,KAAK,GAAG,IAAI,CAACA,KAAK;IACxB,IAAI5D,KAAK,EAAEC,CAAC,GAAG2D,KAAK,CAAC5D,KAAK;IAC1B,MAAMgE,OAAO,GAAG,IAAI,CAACA,OAAO;IAC5B,IAAI,OAAOA,OAAO,KAAK,UAAU,EAAE;;;MAGjC,MAAM/C,EAAE,GAAGlB,uBAAY,CAAC,CAAC0D,IAAI,EAAExD,CAAC,KAAKA,CAAC,CAAC,CAAC+D,OAAO,CAAC;MAChDhE,KAAK,GAAGiB,EAAE,CAAC2C,KAAK,CAAC5D,KAAK,CAAC;IACzB,CAAC,MAAM;;;MAGLA,KAAK,GAAGD,uBAAY,CAACE,CAAC,CAAC,CAAC+D,OAAO,CAAC;IAClC;IACA,MAAMU,OAAO,GAAG,CAACC,MAAM,CAACC,EAAE,CAAChB,KAAK,CAAC5D,KAAK,EAAEA,KAAK,CAAC;IAC9C4D,KAAK,CAAC5D,KAAK,GAAGA,KAAK;IACnB,OAAO0E,OAAO;EAChB;AACF;AAEA,MAAM3B,yBAAI,CAAC;EAKTW,IAAI,EAAET,0BAAK,GAAG,IAAI;EAKlB4B,OAAO,EAAEnC,8BAAkB,GAAG,IAAI;EAKlCoC,WAAW,EAAEzB,2BAAM,CAAC,KAAK,CAAC,EAAE;EAE5BZ,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACiB,IAAI,GAAG,IAAI;IAChB,IAAI,CAACmB,OAAO,GAAG,IAAI;IACnB,IAAI,CAACC,WAAW,GAAI,GAAE,EAAEzB,2BAAM,CAAC,KAAK,CAAC,EAAE,CAAC;EAC1C;EAKAa,MAAMA,CAACD,MAAM,EAAEZ,2BAAM,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC;IAClC,IAAI,CAACyB,WAAW,CAACrE,IAAI,CAACwD,MAAM,CAAC;IAC7B,IAAI,IAAI,CAACa,WAAW,CAACzE,MAAM,KAAK,CAAC,EAAE;MACjCE,2BAAc,CAAC,EAAE,EAAE,IAAI,IAAI;QACzB,MAAMsE,OAAO,GAAG,IAAI,CAACA,OAAO;QAC5BlF,uBAAS,CACPkF,OAAO,KAAK,IAAI,EAChB,+CACF,CAAC;QACD,IAAI,CAACE,MAAM,CAAChF,uBAAY,CAAC2C,8BAAkB,CAAC,CAACmC,OAAO,CAAC,CAAC;MACxD,CAAC,CAAC;IACJ;EACF;EAKAG,MAAMA,CAACH,OAAO,EAAEnC,8BAAkB,CAAC,EAAE,MAAM,CAAC;IAC1C/C,uBAAS,CACPqD,wCAAmB,KAAK,IAAI,IAAIE,wCAAmB,KAAK,IAAI,EAC5D,kDACF,CAAC;IACD,MAAM+B,UAAU,GAAGJ,OAAO,KAAK,IAAI,CAACA,OAAO;IAC3C,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAII,UAAU,EAAE;MACd,IAAI,CAACF,MAAM,CAACF,OAAO,CAAC;IACtB;IAEAlF,uBAAS,CAAC,IAAI,CAAC+D,IAAI,KAAK,IAAI,EAAE,8BAA8B,CAAC;IAC7D,MAAMA,IAAI,EAAET,0BAAK,GAAGlD,uBAAY,CAACkD,0BAAK,CAAC,CAAC,IAAI,CAACS,IAAI,CAAC;IAClD,MAAMjC,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE;IAC3B,IAAI,CAACyD,UAAU,CAACxB,IAAI,EAAEjC,MAAM,EAAE,CAAC,CAAC;IAChC,OAAOf,iBAAI,CAACe,MAAM,EAAE,IAAI,CAAC;EAC3B;EAEAsD,MAAMA,CAACF,OAAO,EAAEnC,8BAAkB,CAAC,EAAE,IAAI,CAAC;IACxC,IAAIyC,UAAU,GAAG,IAAI,CAACzB,IAAI,KAAK,IAAI;IACnC,KAAK,MAAMO,MAAM,IAAI,IAAI,CAACa,WAAW,EAAE;MACrCK,UAAU,GAAGlB,MAAM,CAACQ,GAAG,CAAC,CAAC,IAAIU,UAAU;IACzC;IACA,IAAI,CAACL,WAAW,GAAI,GAAE,EAAEzB,2BAAM,CAAC,KAAK,CAAC,EAAE,CAAC;IACxC,IAAI,CAAC8B,UAAU,EAAE;MACf;IACF;;;;IAKArC,uCAAkB,GAAG,IAAI;IACzB,IAAIa,KAAK,GAAG,IAAI,CAACD,IAAI;IACrB,IAAIC,KAAK,KAAK,IAAI,EAAE;MAClBA,KAAK,GAAG,IAAI,CAACyB,UAAU,CAACP,OAAO,EAAE,IAAI,CAAC;MACtC,IAAI,CAACnB,IAAI,GAAGC,KAAK;IACnB;IACA,OAAOA,KAAK,KAAK,IAAI,EAAE;;MAErB,IAAI0B,MAAM,EAAEpC,0BAAK,GAAGlD,uBAAY,CAACkD,0BAAK,CAAC,CAACU,KAAK,CAAC;MAC9C,IAAI,CAAC2B,WAAW,CAACD,MAAM,CAAC;;MAExB,IAAIA,MAAM,CAACE,KAAK,KAAK,IAAI,EAAE;QACzB5B,KAAK,GAAG0B,MAAM,CAACE,KAAK;MACtB,CAAC,MAAM,IAAIF,MAAM,CAACG,OAAO,KAAK,IAAI,EAAE;QAClC7B,KAAK,GAAG0B,MAAM,CAACG,OAAO;MACxB,CAAC,MAAM;QACL7B,KAAK,GAAG0B,MAAM,CAACI,MAAM;QACrB,OAAO9B,KAAK,KAAK,IAAI,IAAI5D,uBAAY,CAACkD,0BAAK,CAAC,CAACU,KAAK,CAAC,CAAC6B,OAAO,KAAK,IAAI,EAAE;UACpE7B,KAAK,GAAG5D,uBAAY,CAACkD,0BAAK,CAAC,CAACU,KAAK,CAAC,CAAC8B,MAAM;QAC3C;QACA,IAAI9B,KAAK,KAAK,IAAI,EAAE;UAClBA,KAAK,GAAG5D,uBAAY,CAACkD,0BAAK,CAAC,CAACU,KAAK,CAAC,CAAC6B,OAAO;QAC5C;MACF;IACF;IACA1C,uCAAkB,GAAG,IAAI;EAC3B;EAKAoC,UAAUA,CAACvB,KAAK,EAAEV,0BAAK,EAAEyC,GAAG,EAAE,MAAM,EAAE,EAAEC,KAAK,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC;IAC3D,QAAQhC,KAAK,CAACzB,IAAI,CAAC0D,IAAI;MACrB,KAAK,MAAM;QAAE;UACX,MAAMC,GAAG,GAAG9F,uBAAY,CAAC+F,kCAAa,CAAC,CAACnC,KAAK,CAACzB,IAAI,CAAC,CAAC2D,GAAG;UACvD,MAAME,MAAM,GAAGnE,8BAAS,CAAC,GAAG,EAAE+D,KAAK,CAAC;UACpC,IAAI9D,GAAG,GAAGkE,MAAM,GAAG,GAAG,GAAGF,GAAG;UAC5B,KAAK,MAAM,CAACG,QAAQ,EAAEC,SAAS,CAAC,IAAItB,MAAM,CAACuB,OAAO,CAACvC,KAAK,CAACvB,KAAK,CAAC,EAAE;YAC/D,IAAI6D,SAAS,IAAI,IAAI,IAAI,OAAOA,SAAS,KAAK,UAAU,EAAE;cACxD;YACF;YAEApE,GAAG,IAAK,IAAGmE,QAAS,IAAGG,IAAI,CAACC,SAAS,CAACH,SAAS,CAAC,IAAI,WAAY,EAAC;UACnE;UACA,IAAItC,KAAK,CAAC4B,KAAK,IAAI,IAAI,EAAE;YACvB1D,GAAG,IAAI,KAAK;YACZ6D,GAAG,CAACjF,IAAI,CAACoB,GAAG,CAAC;UACf,CAAC,MAAM;YACLA,GAAG,IAAI,GAAG;YACV6D,GAAG,CAACjF,IAAI,CAACoB,GAAG,CAAC;YACb,IAAI,CAACwE,aAAa,CAAC1C,KAAK,EAAE+B,GAAG,EAAEC,KAAK,GAAG,CAAC,CAAC;YACzCD,GAAG,CAACjF,IAAI,CAACsF,MAAM,GAAG,IAAI,GAAGF,GAAG,GAAG,GAAG,CAAC;UACrC;UACA;QACF;MACA,KAAK,MAAM;QAAE;UACX,MAAMS,IAAI,GAAGvG,uBAAY,CAACwG,kCAAa,CAAC,CAAC5C,KAAK,CAACzB,IAAI,CAAC,CAACoE,IAAI;UACzD,IAAIA,IAAI,KAAK,EAAE,EAAE;YACfZ,GAAG,CAACjF,IAAI,CAACmB,8BAAS,CAAC,GAAG,EAAE+D,KAAK,CAAC,GAAGW,IAAI,CAAC;UACxC;UACA;QACF;MACA,KAAK,UAAU;MACf,KAAK,WAAW;QAAE;UAChB,IAAI,CAACD,aAAa,CAAC1C,KAAK,EAAE+B,GAAG,EAAEC,KAAK,CAAC;UACrC;QACF;IACF;EACF;EAEAU,aAAaA,CAAC1C,KAAK,EAAEV,0BAAK,EAAEyC,GAAG,EAAE,MAAM,EAAE,EAAEC,KAAK,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC;IAC9D,IAAIa,OAAO,EAAEvD,0BAAK,GAAG,IAAI,GAAGU,KAAK,CAAC4B,KAAK;IACvC,OAAOiB,OAAO,KAAK,IAAI,EAAE;MACvB,IAAI,CAACtB,UAAU,CAACnF,uBAAY,CAACkD,0BAAK,CAAC,CAACuD,OAAO,CAAC,EAAEd,GAAG,EAAEC,KAAK,CAAC;MACzDa,OAAO,GAAGzG,uBAAY,CAACkD,0BAAK,CAAC,CAACuD,OAAO,CAAC,CAAChB,OAAO;IAChD;EACF;EAMAF,WAAWA,CAAC3B,KAAK,EAAEV,0BAAK,CAAC,EAAE,IAAI,CAAC;IAC9B,IAAI;MACFD,wCAAmB,GAAGW,KAAK;MAC3BT,wCAAmB,GAAG,IAAI;MAC1B,QAAQS,KAAK,CAACzB,IAAI,CAAC0D,IAAI;QACrB,KAAK,WAAW;UAAE;YAChBjG,uBAAS,CACPyD,2CAAsB,CAAC/C,MAAM,KAAK,CAAC,EACnC,mCACF,CAAC;YACD,MAAM2E,MAAM,EAAE,CAAC5C,KAAK,EAAEC,iBAAK,KAAKK,8BAAkB,GAChD3C,uBAAY,CAAC0G,uCAAkB,CAAC,CAAC9C,KAAK,CAACzB,IAAI,CAAC,CAACwE,SAAS;YACxD,IAAI7B,OAAO,GAAGG,MAAM,CAACrB,KAAK,CAACvB,KAAK,CAAC;YACjC,IAAIuE,cAAc,EAAE,MAAM,GAAG,CAAC;YAC9B,OAAOvD,2CAAsB,CAAC/C,MAAM,KAAK,CAAC,EAAE;cAC1CsG,cAAc,EAAE;cAChBhH,uBAAS,CACPgH,cAAc,GAAG,IAAI,EACrB,oDACF,CAAC;cACD,IAAI1B,UAAU,GAAG,KAAK;cACtB,KAAK,MAAMhB,MAAM,IAAIb,2CAAsB,EAAE;gBAC3CzD,uBAAS,CACPsE,MAAM,CAACN,KAAK,KAAKA,KAAK,EACtB,mFAAmF,GACjF,wEACJ,CAAC;gBACDsB,UAAU,GAAGhB,MAAM,CAACQ,GAAG,CAAC,CAAC,IAAIQ,UAAU;cACzC;cACA7B,2CAAsB,CAAC/C,MAAM,GAAG,CAAC;cACjC,IAAI,CAAC4E,UAAU,EAAE;gBACf;cACF;cACAJ,OAAO,GAAGG,MAAM,CAACrB,KAAK,CAACvB,KAAK,CAAC;YAC/B;YACAuB,KAAK,CAAC4B,KAAK,GAAG,IAAI,CAACqB,cAAc,CAACjD,KAAK,EAAEA,KAAK,CAAC4B,KAAK,EAAEV,OAAO,CAAC;YAC9D;UACF;QACA,KAAK,MAAM;UAAE;YACX,MAAMP,EAAE,GAAGX,KAAK,CAACvB,KAAK,CAACkC,EAAE;YACzB,IAAIA,EAAE,IAAI,IAAI,EAAE;cACd,MAAMuC,OAAO,GAAGlD,KAAK,CAACvB,KAAK,CAACyE,OAAO;cACnC,IAAIA,OAAO,IAAI,IAAI,EAAE;gBACnB1C,8BAAS,CAAC2C,GAAG,CAACxC,EAAE,EAAEuC,OAAO,CAAC;cAC5B;cACA,MAAME,QAAQ,GAAGpD,KAAK,CAACvB,KAAK,CAAC2E,QAAQ;cACrC,IAAIA,QAAQ,IAAI,IAAI,EAAE;gBACpB5C,8BAAS,CAAC2C,GAAG,CAACxC,EAAE,EAAEyC,QAAQ,CAAC;cAC7B;YACF;YACA;UACF;QACA,KAAK,UAAU;QACf,KAAK,MAAM;UAAE;;YAEX;UACF;QACA;UAAS;YACP,MAAM,IAAIjH,KAAK,CAAC,yBAAyB,GAAG6D,KAAK,CAACzB,IAAI,CAAC0D,IAAI,CAAC;UAC9D;MACF;IACF,CAAC,SAAS;MACR5C,wCAAmB,GAAG,IAAI;MAC1BE,wCAAmB,GAAG,IAAI;IAC5B;EACF;EAMAkC,UAAUA,CAAC4B,eAAe,EAAEpE,sBAAU,EAAE6C,MAAM,EAAExC,0BAAK,GAAG,IAAI,CAAC,EAAEA,0BAAK,CAAC;IACnE,IAAIU,KAAK,EAAEV,0BAAK;;IAEhB,IAAI,OAAO+D,eAAe,KAAK,QAAQ,EAAE;MACvC,MAAMnC,OAAO,GAAG9E,uBAAY,CAAC2C,8BAAkB,CAAC,CAACsE,eAAe,CAAC;MACjE,IAAI,OAAOnC,OAAO,CAAC3C,IAAI,KAAK,UAAU,EAAE;QACtC,MAAMwE,SAAS,EAAE1E,8BAAS,GAAGjC,uBAAY,CAACiC,8BAAS,CAAC,CAAC6C,OAAO,CAAC3C,IAAI,CAAC;QAClE,MAAMA,IAAI,EAAE+E,8BAAS,GAAG,IAAIR,uCAAkB,CAACC,SAAS,CAAC;QACzD/C,KAAK,GAAG,IAAIV,0BAAK,CAACf,IAAI,EAAG,CAAA2C,OAAO,CAACzC,KAAK,EAAE,GAAG,GAAGyC,OAAO,CAACvC,GAAG,CAAC;MAC5D,CAAC,MAAM,IAAI,OAAOuC,OAAO,CAAC3C,IAAI,KAAK,QAAQ,EAAE;QAC3CvC,uBAAS,CACP,OAAOkF,OAAO,CAAC3C,IAAI,KAAK,QAAQ,EAChC,8DAA8D,GAC5D,OAAO2C,OAAO,CAAC3C,IACnB,CAAC;QACD,MAAMA,IAAI,EAAE+E,8BAAS,GAAG,IAAInB,kCAAa,CACvC/F,uBAAY,CAAC,MAAM,CAAC,CAAC8E,OAAO,CAAC3C,IAAI,CACnC,CAAC;QACDvC,uBAAS,CACPkF,OAAO,CAACzC,KAAK,KAAK,IAAI,IAAI,OAAOyC,OAAO,CAACzC,KAAK,KAAK,QAAQ,EAC3D,0BACF,CAAC;;QAGD,MAAM8E,QAAQ,GAAGrC,OAAO,CAACzC,KAAK,CAAC8E,QAAQ;QACvC,MAAM9E,KAAK,GAAG;UAAC,GAAGyC,OAAO,CAACzC;QAAK,CAAC;QAChC,OAAOA,KAAK,CAAC8E,QAAQ;QAErBvD,KAAK,GAAG,IAAIV,0BAAK,CAACf,IAAI,EAAEE,KAAK,EAAEyC,OAAO,CAACvC,GAAG,CAAC;QAC3C,IAAI,CAAC6E,aAAa,CAACD,QAAQ,EAAEvD,KAAK,CAAC;MACrC,CAAC,MAAM;QACL,QAAQkB,OAAO,CAAC3C,IAAI;UAClB,KAAKW,wCAAmB;YAAE;cACxB,MAAMX,IAAI,EAAE+E,8BAAS,GAAG,IAAIG,sCAAiB,CAAC,CAAC;cAC/CzD,KAAK,GAAG,IAAIV,0BAAK,CAACf,IAAI,EAAG,CAAA2C,OAAO,CAACzC,KAAK,EAAE,GAAG,GAAGyC,OAAO,CAACvC,GAAG,CAAC;cAC1D,IAAI,CAAC6E,aAAa,CAACtC,OAAO,CAACzC,KAAK,CAAC8E,QAAQ,EAAEvD,KAAK,CAAC;cACjD;YACF;UACA;YAAS;cACP,MAAM,IAAI7D,KAAK,CAAE,wBAAuB+E,OAAO,CAAC3C,IAAK,EAAC,CAAC;YACzD;QACF;MACF;IACF,CAAC,MAAM,IAAI,OAAO8E,eAAe,KAAK,QAAQ,EAAE;MAC9C,MAAM9E,IAAI,GAAG,IAAIqE,kCAAa,CAACxG,uBAAY,CAAC,MAAM,CAAC,CAACiH,eAAe,CAAC,CAAC;MACrErD,KAAK,GAAG,IAAIV,0BAAK,CAACf,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC;IACnC,CAAC,MAAM;MACL,MAAM,IAAIpC,KAAK,CAAE,8BAA6B,OAAOkH,eAAgB,EAAC,CAAC;IACzE;IACArD,KAAK,CAAC8B,MAAM,GAAGA,MAAM;IACrB,OAAO9B,KAAK;EACd;EAEAwD,aAAaA,CAACD,QAAQ,EAAEtE,sBAAU,EAAEyE,WAAW,EAAEpE,0BAAK,CAAC,EAAE,IAAI,CAAC;IAC5D,IAAIqE,KAAK,CAACC,OAAO,CAACL,QAAQ,CAAC,EAAE;MAC3B,IAAIzD,IAAI,EAAER,0BAAK,GAAG,IAAI,GAAG,IAAI;MAC7B,KAAK,MAAMuE,YAAY,IAAIzH,uBAAY,CAAC,GAAG,EAAE,CAAC,CAACmH,QAAQ,CAAC,EAAE;QACxD,IAAIM,YAAY,IAAI,IAAI,EAAE;UACxB;QACF;QACA,MAAMjC,KAAK,GAAG,IAAI,CAACH,UAAU,CAC3BrF,uBAAY,CAAC6C,sBAAU,CAAC,CAAC4E,YAAY,CAAC,EACtCH,WACF,CAAC;QACD,IAAI5D,IAAI,KAAK,IAAI,EAAE;UACjB1D,uBAAY,CAACkD,0BAAK,CAAC,CAACQ,IAAI,CAAC,CAAC+B,OAAO,GAAGD,KAAK;QAC3C,CAAC,MAAM;;UAEL8B,WAAW,CAAC9B,KAAK,GAAGA,KAAK;QAC3B;QACA9B,IAAI,GAAG8B,KAAK;MACd;IACF,CAAC,MAAM,IAAI2B,QAAQ,IAAI,IAAI,EAAE;MAC3B,MAAM3B,KAAK,GAAG,IAAI,CAACH,UAAU,CAAE,CAAA8B,QAAQ,EAAE,GAAG,GAAGG,WAAW,CAAC;MAC3DA,WAAW,CAAC9B,KAAK,GAAGA,KAAK;IAC3B;EACF;EAOAqB,cAAcA,CACZnB,MAAM,EAAExC,0BAAK,EACbwE,SAAS,EAAExE,0BAAK,GAAG,IAAI,EACvB4B,OAAO,EAAEnC,8BAAkB,CAC5B,EAAEO,0BAAK,CAAC;IACP,IACEwE,SAAS,KAAK,IAAI,IAClB1H,uBAAY,CAACkD,0BAAK,CAAC,CAACwE,SAAS,CAAC,CAACvF,IAAI,KAAK2C,OAAO,CAAC3C,IAAI,EACpD;MACA,IAAIuF,SAAS,EAAExE,0BAAK,GAAGlD,uBAAY,CAACkD,0BAAK,CAAC,CAACwE,SAAS,CAAC;;;;MAIrD,QAAQA,SAAS,CAACvF,IAAI,CAAC0D,IAAI;QACzB,KAAK,MAAM;UAAE;YACXjG,uBAAS,CACPkF,OAAO,CAACzC,KAAK,KAAK,IAAI,IAAI,OAAOyC,OAAO,CAACzC,KAAK,KAAK,QAAQ,EAC3D,0BACF,CAAC;;YAGD,MAAM8E,QAAQ,GAAGrC,OAAO,CAACzC,KAAK,CAAC8E,QAAQ;YACvC,MAAM9E,KAAK,GAAG;cAAC,GAAGyC,OAAO,CAACzC;YAAK,CAAC;YAChC,OAAOA,KAAK,CAAC8E,QAAQ;YAErBO,SAAS,CAACrF,KAAK,GAAGA,KAAK;YACvB,IAAI,CAACsF,iBAAiB,CAACD,SAAS,EAAG,CAAAP,QAAQ,EAAE,GAAG,CAAC,CAAC;YAClD;UACF;QACA,KAAK,UAAU;UAAE;YACfvH,uBAAS,CACPkF,OAAO,CAACzC,KAAK,KAAK,IAAI,IAAI,OAAOyC,OAAO,CAACzC,KAAK,KAAK,QAAQ,EAC3D,0BACF,CAAC;YAED,MAAM8E,QAAQ,GAAGrC,OAAO,CAACzC,KAAK,CAAC8E,QAAQ;YACvC,IAAI,CAACQ,iBAAiB,CAACD,SAAS,EAAG,CAAAP,QAAQ,EAAE,GAAG,CAAC,CAAC;YAClD;UACF;QACA,KAAK,WAAW;UAAE;YAChBvH,uBAAS,CACPkF,OAAO,CAACzC,KAAK,KAAK,IAAI,IAAI,OAAOyC,OAAO,CAACzC,KAAK,KAAK,QAAQ,EAC3D,0BACF,CAAC;YACDqF,SAAS,CAACrF,KAAK,GAAGyC,OAAO,CAACzC,KAAK;YAC/B;UACF;QACA;UAAS;YACP,MAAM,IAAItC,KAAK,CAAE,qBAAoB2H,SAAS,CAACvF,IAAI,CAAC0D,IAAK,EAAC,CAAC;UAC7D;MACF;MACA,OAAO6B,SAAS;IAClB,CAAC,MAAM;MACL,MAAMlC,KAAK,GAAG,IAAI,CAACH,UAAU,CAACP,OAAO,EAAEY,MAAM,CAAC;MAC9C,OAAOF,KAAK;IACd;EACF;EAKAmC,iBAAiBA,CAACjC,MAAM,EAAExC,0BAAK,EAAEiE,QAAQ,EAAEtE,sBAAU,CAAC,EAAE,IAAI,CAAC;IAC3D,MAAM6E,SAAS,EAAExE,0BAAK,GAAG,IAAI,GAAGwC,MAAM,CAACF,KAAK;IAC5C,IAAI+B,KAAK,CAACC,OAAO,CAACL,QAAQ,CAAC,EAAE;MAC3B,IAAIS,aAAa,GAAG5H,uBAAY,CAAC2C,8BAAkB,EAAE,CAAC,CAACwE,QAAQ,CAAC;;MAEhE,IAAIS,aAAa,CAACtH,MAAM,KAAK,CAAC,EAAE;QAC9BoF,MAAM,CAACF,KAAK,GAAG,IAAI;MACrB,CAAC,MAAM,IAAIoC,aAAa,CAACtH,MAAM,KAAK,CAAC,EAAE;QACrCoF,MAAM,CAACF,KAAK,GAAG,IAAI,CAACqB,cAAc,CAACnB,MAAM,EAAEgC,SAAS,EAAEE,aAAa,CAAC,CAAC,CAAC,CAAC;QACvE5H,uBAAY,CAACkD,0BAAK,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAC,CAACC,OAAO,GAAG,IAAI;MAClD,CAAC,MAAM;QACL,IAAI,CAACoC,yBAAyB,CAACnC,MAAM,EAAEkC,aAAa,CAAC;MACvD;IACF,CAAC,MAAM,IAAI,OAAOT,QAAQ,KAAK,QAAQ,EAAE;MACvC,IACEO,SAAS,KAAK,IAAI,IAClB1H,uBAAY,CAACkD,0BAAK,CAAC,CAACwE,SAAS,CAAC,CAACvF,IAAI,CAAC0D,IAAI,KAAK,MAAM,EACnD;QACA,MAAML,KAAK,GAAG,IAAItC,0BAAK,CAAC;UAAC2C,IAAI,EAAE,MAAM;UAAEU,IAAI,EAAEY;QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC;QACjEzB,MAAM,CAACF,KAAK,GAAGA,KAAK;MACtB,CAAC,MAAM;QACLxF,uBAAY,CAACwG,kCAAa,CAAC,CAACxG,uBAAY,CAACkD,0BAAK,CAAC,CAACwE,SAAS,CAAC,CAACvF,IAAI,CAAC,CAACoE,IAAI,GACnEvG,uBAAY,CAAC,MAAM,CAAC,CAACmH,QAAQ,CAAC;MAClC;IACF,CAAC,MAAM,IAAIA,QAAQ,IAAI,IAAI,EAAE;MAC3BzB,MAAM,CAACF,KAAK,GAAG,IAAI,CAACqB,cAAc,CAChCnB,MAAM,EACNgC,SAAS,EACT1H,uBAAY,CAAC2C,8BAAkB,CAAC,CAACwE,QAAQ,CAC3C,CAAC;MACDnH,uBAAY,CAACkD,0BAAK,CAAC,CAACwC,MAAM,CAACF,KAAK,CAAC,CAACC,OAAO,GAAG,IAAI;IAClD,CAAC,MAAM;MACLC,MAAM,CAACF,KAAK,GAAG,IAAI;MACnB,IAAIkC,SAAS,KAAK,IAAI,EAAE;QACtB1H,uBAAY,CAACkD,0BAAK,CAAC,CAACwE,SAAS,CAAC,CAAChC,MAAM,GAAG,IAAI;MAC9C;IACF;EACF;EAOAmC,yBAAyBA,CACvBnC,MAAM,EAAExC,0BAAK,EACbiE,QAAQ,EAAExE,8BAAkB,EAAE,CAC/B,EAAE,IAAI,CAAC;IACN/C,uBAAS,CACPuH,QAAQ,CAAC7G,MAAM,GAAG,CAAC,EACnB,6CACF,CAAC;;IAED,MAAMwH,aAAa,EAAE,GAAG,GAAG,IAAIzD,GAAG,CAAC,CAAC;IACpC,IAAIoC,OAAO,EAAEvD,0BAAK,GAAG,IAAI,GAAGwC,MAAM,CAACF,KAAK;IACxC,OAAOiB,OAAO,KAAK,IAAI,EAAE;MACvB,IAAIzG,uBAAY,CAACkD,0BAAK,CAAC,CAACuD,OAAO,CAAC,CAAClE,GAAG,KAAK,IAAI,EAAE;QAC7CuF,aAAa,CAACf,GAAG,CAAC/G,uBAAY,CAACkD,0BAAK,CAAC,CAACuD,OAAO,CAAC,CAAClE,GAAG,EAAEkE,OAAO,CAAC;MAC9D;MACAA,OAAO,GAAGzG,uBAAY,CAACkD,0BAAK,CAAC,CAACuD,OAAO,CAAC,CAAChB,OAAO;IAChD;IACA,IAAI/B,IAAI,EAAER,0BAAK,GAAG,IAAI,GAAG,IAAI,CAAC,C;IAC9B,IAAI6E,WAAW,EAAE7E,0BAAK,GAAG,IAAI,GAAGwC,MAAM,CAACF,KAAK,CAAC,C;IAC7C,KAAK,MAAMiC,YAAY,IAAIN,QAAQ,EAAE;MACnC,MAAMa,SAAS,GACb,CAACP,YAAY,CAAClF,GAAG,IAAI,IAAI,GACrBuF,aAAa,CAACrD,GAAG,CAACgD,YAAY,CAAClF,GAAG,CAAC,GACnC,IAAI,KAAKwF,WAAW;MAC1B,IAAIvC,KAAK,EAAEtC,0BAAK;MAChB,IAAI8E,SAAS,IAAI,IAAI,EAAE;QACrBxC,KAAK,GAAG,IAAI,CAACqB,cAAc,CAACnB,MAAM,EAAEsC,SAAS,EAAEP,YAAY,CAAC;MAC9D,CAAC,MAAM;QACLjC,KAAK,GAAG,IAAI,CAACH,UAAU,CAACoC,YAAY,EAAE/B,MAAM,CAAC;MAC/C;MACA,IAAIhC,IAAI,KAAK,IAAI,EAAE;QACjB1D,uBAAY,CAACkD,0BAAK,CAAC,CAACQ,IAAI,CAAC,CAAC+B,OAAO,GAAGD,KAAK;MAC3C,CAAC,MAAM;;QAELE,MAAM,CAACF,KAAK,GAAGA,KAAK;MACtB;MACA9B,IAAI,GAAG8B,KAAK;MACZuC,WAAW,GACTA,WAAW,KAAK,IAAI,GAAG/H,uBAAY,CAACkD,0BAAK,CAAC,CAAC6E,WAAW,CAAC,CAACtC,OAAO,GAAG,IAAI;IAC1E;EACF;AACF;;;;;;;AAQA,KAAKxD,8BAAS,GAAG,CAACI,KAAK,EAAEC,iBAAK,KAAKK,8BAAkB;;;;;;;;;;;;;;;AAgBrD,MAAMuE,8BAAS,CAAC;EACdrB,IAAI,EAAE,MAAM;EACZnD,WAAWA,CAACmD,IAAI,EAAE,MAAM,EAAE;IACxB,IAAI,CAACA,IAAI,GAAGA,IAAI;EAClB;AACF;AAEA,MAAMa,uCAAkB,SAASQ,8BAAS,CAAC;EACzCP,SAAS,EAAE1E,8BAAS;EACpBS,WAAWA,CAACiE,SAAS,EAAE1E,8BAAS,EAAE;IAChC,KAAK,CAAC,WAAW,CAAC;IAClB,IAAI,CAAC0E,SAAS,GAAGA,SAAS;EAC5B;AACF;AACA,MAAMZ,kCAAa,SAASmB,8BAAS,CAAC;EACpCpB,GAAG,EAAE,MAAM;EACXpD,WAAWA,CAACoD,GAAG,EAAE,MAAM,EAAE;IACvB,KAAK,CAAC,MAAM,CAAC;IACb,IAAI,CAACA,GAAG,GAAGA,GAAG;EAChB;AACF;AACA,MAAMuB,sCAAiB,SAASH,8BAAS,CAAC;EACxCxE,WAAWA,CAAA,EAAG;IACZ,KAAK,CAAC,UAAU,CAAC;EACnB;AACF;AACA,MAAM8D,kCAAa,SAASU,8BAAS,CAAC;EACpCX,IAAI,EAAE,MAAM;EACZ7D,WAAWA,CAAC6D,IAAI,EAAE,MAAM,EAAE;IACxB,KAAK,CAAC,MAAM,CAAC;IACb,IAAI,CAACA,IAAI,GAAGA,IAAI;EAClB;AACF;;;;;;AAOO,KAAKjE,iBAAK,GAAG,GAAG;;;;AAKvB,MAAMc,0BAAK,CAAC,CAAC,CAAC,CAAC;EACbnD,KAAK,EAAEC,CAAC;EACR8D,IAAI,EAAEZ,0BAAK,CAAClD,CAAC,CAAC,GAAG,IAAI;EACrBwD,IAAI,EAAEN,0BAAK,CAAClD,CAAC,CAAC,GAAG,IAAI;EAErBwC,WAAWA,CAACzC,KAAK,EAAEC,CAAC,EAAE;IACpB,IAAI,CAACD,KAAK,GAAGA,KAAK;IAElB,IAAI,CAAC+D,IAAI,GAAG,IAAI;IAChB,IAAI,CAACN,IAAI,GAAG,IAAI;EAClB;AACF;;;;;AAMA,MAAMR,0BAAK,CAAC;EACVf,IAAI,EAAE+E,8BAAS;EACf7E,KAAK,EAAEC,iBAAK;EACZoD,MAAM,EAAExC,0BAAK,GAAG,IAAI;EACpBsC,KAAK,EAAEtC,0BAAK,GAAG,IAAI;EACnBuC,OAAO,EAAEvC,0BAAK,GAAG,IAAI;EACrBW,KAAK,EAAET,0BAAK,CAAC,KAAK,CAAC,GAAG,IAAI;EAC1Bb,GAAG,EAAEC,8BAAS,GAAG,IAAI;EAErBE,WAAWA,CAACP,IAAI,EAAE+E,8BAAS,EAAE7E,KAAK,EAAEC,iBAAK,EAAEC,GAAG,EAAEC,8BAAS,GAAG,IAAI,EAAE;IAChE,IAAI,CAACL,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACE,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACE,GAAG,GAAGA,GAAG;IAEd,IAAI,CAACmD,MAAM,GAAG,IAAI;IAClB,IAAI,CAACF,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,OAAO,GAAG,IAAI;IACnB,IAAI,CAAC5B,KAAK,GAAG,IAAI;EACnB;AACF;AAEO,SAASoE,eAAGA,CACjB9F,IAAI,EAAEH,sCAAiB,EACvBK,KAAK,EAAEC,iBAAK,EACZC,GAAG,EAAEC,8BAAS,GAAG,IAAI,CACtB,EAAEG,8BAAkB,CAAC;EACpB,QAAQ;;EACR,OAAO;IACLR,IAAI,EAAEA,IAAI;IACVE,KAAK,EAAEA,KAAK;IACZE,GAAG,EAAEA,GAAG;IACRE,GAAG,EAAE;EACP,CAAC;AACH;AAEO,SAASyF,oBAAQA,CAAC7F,KAAK,EAAEC,iBAAK,CAAC,EAAEK,8BAAkB,CAAC;EACzD,QAAQ;;EACR,OAAO;IACLR,IAAI,EAAEW,wCAAmB;IACzBT,KAAK,EAAEA,KAAK;IACZE,GAAG,EAAE,IAAI;IACTE,GAAG,EAAE;EACP,CAAC;AACH;AAEO,SAAS0F,sBAAUA,CACxBC,IAAI,EAAE,CAAC/F,KAAK,EAAEC,iBAAK,EAAEG,GAAG,EAAE,KAAK,KAAKE,8BAAkB,CACvD,EAAEV,8BAAS,CAAC;EACX,OAAO,CAACI,KAAK,EAAEC,iBAAK,CAAC,EAAEK,8BAAkB,IAAIyF,IAAI,CAAC/F,KAAK,EAAE,IAAI,CAAC;AAChE;AAAC;ACpyBM,SAASgG,kCAAGA,CACjBC,IAAI,EAAE,MAAM,EAAE,GAAG,MAAM,EACvBC,QAAQ,EAAE,KAAK,CAChB,EAAE,CAACC,IAAI,EAAE,KAAK,KAAK,MAAM,CAAC;EACzB,MAAMC,UAAU,EAAE,MAAM,GACtB,OAAOH,IAAI,KAAK,QAAQ,GACpBtI,uBAAY,CAAC,MAAM,CAAC,CAACsI,IAAI,CAAC,GAC1B3H,iBAAI,CAACX,uBAAY,CAAC,MAAM,EAAE,CAAC,CAACsI,IAAI,CAAC,EAAE,GAAG,CAAC;EAC7C,OAAO,CAACE,IAAI,EAAE,KAAK,CAAC,EAAE,MAAM,IAAIC,UAAU;AAC5C;AAAC;ACZM,SAASC,QAAEA,CAAC,GAAGC,IAAI,EAAE,GAAG,CAAC,EAAE,MAAM,CAAC;EACvC,OAAOA,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC;AACvB;AAAC;ACKD,MAAMC,qBAAc,GAAGR,kCAAG,CACxB,qOAAqO,EACrO;EACEE,QAAQ,EAAE;IACRO,OAAO,EAAE;MACPC,OAAO,EACL,+DAA+D;MACjEC,WAAW,EACT,8EAA8E;MAChFC,OAAO,EACL,0FAA0F;MAC5FC,SAAS,EACP,wEAAwE;MAC1EC,KAAK,EAAE,8CAA8C;MACrDC,IAAI,EAAE;IACR,CAAC;IACDC,IAAI,EAAE;MACJN,OAAO,EAAE,eAAe;MACxBO,EAAE,EAAE,6BAA6B;MACjCC,EAAE,EAAE,sBAAsB;MAC1BC,IAAI,EAAE;IACR;EACF,CAAC;EACDC,eAAe,EAAE;IACfX,OAAO,EAAE,SAAS;IAClBO,IAAI,EAAE;EACR;AACF,CACF,CAAC;AAED,MAAMK,aAAM,GA/CZvB,sBAAA,CAgDE,CACE;EAACwB,SAAS;EAAEb,OAAO;EAAEO,IAAI;EAAEO,OAAO,GAAG,KAAK;EAAE,GAAGvH;AAAK,CAAC,EACrDI,GAAG,CACJ,EAAEE,8BAAkB,IAAI;EACvB,OApDJsF,eAAA;IAAA0B,SAAA,EAsDmBjB,QAAE,CAACG,qBAAc,CAAC;MAACC,OAAO;MAAEO,IAAI;MAAEM;IAAS,CAAC,CAAC,CAtDhE;IAAAlH,GAAA,EAuDaA,GAvDb;IAAA,GAwDYJ;EAxDZ;AA2DE,CACF,CAAC;AAAC;AC7Ca,SAASwH,YAASA,CAACxH,KAAK,EAAEC,iBAAK,CAAC,EAAEK,8BAAkB,CAAC;EAClE,MAAM,CAACmH,MAAM,EAAEC,SAAS,CAAC,GAAGvG,oBAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;EACnD,OAjBFyE,eAAA,CAAAC,oBAAA;IAAAf,QAAA,GAAAc,eAAA,CAAAyB,aAAA;MAAAnF,EAAA,EAmBiB,UAnBjB;MAAAuC,OAAA,EAmBqCA,CAAA,KAAMiD,SAAS,CAAC,CAACD,MAAM,CAnB5D;MAAA3C,QAAA,iBAoBmB6C,MAAM,CAACF,MAAM,CAAC;IApBjC,UAAA7B,eAAA;MAAAd,QAAA;IAAA;EAAA;AAyBA;AAAC;ACXD,SAAS8C,uBAAQA,CAAC5J,CAAC,EAAE,MAAM,EAAEyB,GAAG,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC;EAC9C,IAAIzB,CAAC,KAAK,CAAC,EAAE;IACX6J,KAAK,CAAC,iCAAiC,CAAC;IACxCA,KAAK,CAACpI,GAAG,CAAC;IACVoI,KAAK,CAAC,iCAAiC,CAAC;EAC1C;AACF;AAEA,SAASC,kBAAGA,CAACC,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC;EAC5B,KAAK,IAAI/J,CAAC,EAAE,MAAM,GAAG,CAAC,EAAEA,CAAC,IAAI+J,CAAC,EAAE,EAAE/J,CAAC,EAAE;IACnC,MAAMsD,IAAI,GAxBdJ,sBAAA,CAwBkC,CAAC;IAC/B,MAAM8G,WAAW,GAzBrBpC,eAAA,CAAA4B,YAAA,WAyBqC;IACjCI,uBAAQ,CAAC5J,CAAC,EAAEsD,IAAI,CAACsB,MAAM,CAACoF,WAAW,CAAC,CAAC;IA1BzC/F,+BAAA,CA4B8B,UAAU,EAAE,IAAI,CAAC;IAC3ClE,gCAAmB,CAAC,CAAC;IACrB6J,uBAAQ,CAAC5J,CAAC,EAAEsD,IAAI,CAACsB,MAAM,CAACoF,WAAW,CAAC,CAAC;EACvC;AACF;AAEAF,kBAAG,CAAC,CAAC,CAAC"}